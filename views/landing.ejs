<%- include('partials/header', { bodyClass: 'landing' , currentUser }) %>

  <div class="hero">
    <h1>Find Your Dream Job Today</h1>
    <p>Connecting developers with top tech companies. Browse thousands of jobs and take the next step in your career.
    </p>

    <% if (currentUser) { %>
      <p>Welcome back, <%= currentUser.name %>!</p>
      <a href="/jobs" class="btn">Browse Jobs</a>
      <% } else { %>
        <div style="display: flex; gap: 1rem; justify-content: center;">
          <a href="/jobs" class="btn">Browse Jobs</a>
          <a href="/register" class="btn btn-secondary">Create Account</a>
        </div>
        <% } %>
  </div>

  <div style="margin-top: 4rem;">
    <h2 style="text-align: center; margin-bottom: 2rem;">Featured Opportunities</h2>
    <div class="job-grid">
      <% if (typeof jobs !=='undefined' && jobs.length> 0) { %>
        <% jobs.forEach(job=> { %>
          <div class="card job-card">
            <h3>
              <a href="/jobs/<%= job.id %>" style="color: inherit; text-decoration: none;">
                <%= job.jobdesignation %>
              </a>
            </h3>
            <div class="job-meta">
              <span>üè¢ <%= job.companyname %></span>
              <span>üìç <%= job.location || job.joblocation %></span>
            </div>
            <p style="color: var(--text-muted); margin-bottom: 1.5rem;">
              Posted: <%= new Date(job.jobposted).toLocaleDateString() %>
            </p>
            <a href="/jobs/<%= job.id %>" class="btn">View Details</a>
          </div>
          <% }); %>
            <% } else { %>
              <div style="text-align: center; grid-column: 1 / -1;">
                <p style="color: var(--text-muted);">No featured jobs available at the moment.</p>
              </div>
              <% } %>
    </div>

    <div style="text-align: center; margin-top: 2rem;">
      <a href="/jobs" class="btn btn-secondary">View All Jobs</a>
    </div>
  </div>
  <%- include('partials/footer') %>